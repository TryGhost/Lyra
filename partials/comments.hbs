{{!-- REMEMBER : Add in your unique Cove.chat publication ID --}}

{{!-- Option A: Show comments to all visitors (only members can comment) --}}

{{!-- {{#if @labs.members}}
  <h2><span id="cove-count"></span> Comments</h2>
  <div id="cove"></div>

  {{#if @member}}
    <p>Signed in as {{@member.email}} · <a href="javascript:" data-members-signout>Sign out</a></p>
  {{else}}
    <p>Become a {{@site.title}} member below to join the conversation (it's free!). As a member, you will also receive new posts by email (you can unsubscribe at any time).</p>
    <form data-members-form="signin" id="cove-login">
      <input class="cove-input" data-members-email type="email" required="true" placeholder="your@email.com" />
      <button type="submit" class="cove-button">
        <span class="button-text">Send a log in link</span>
        <span class="button-spinner" style="display:none"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" display="block"><circle cx="50" cy="50" fill="none" stroke="#fff" stroke-width="12" r="39" stroke-dasharray="183.7831702350029 63.261056745000964" transform="rotate(197.992 50 50)"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"/></circle></svg></span>
      </button>
      <span class="signin-success" style="display:none">Great! Please check your inbox (or spam folder) for a log in link.</span>
      <span class="signin-error" style="display:none">Something didn't work. Please try again.</span>
    </form>
  {{/if}}

  <script>
  const Cove = {
    publication: "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
    contentId: "{{id}}",
    memberId: "{{@member.uuid}}",
    memberEmail: "{{@member.email}}"
  }
  </script>
{{/if}} --}}

{{!-- Option B: Only show comments to signed in members (only members can comment) --}}

{{#if @labs.members}}
  <h2><span id="cove-count"></span> Comments</h2>
  {{#if @member}}
    <div id="cove"></div>

    <p>Signed in as {{@member.email}} · <a href="javascript:" data-members-signout>Sign out</a></p>

    <script>
    const Cove = {
      publication: "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
      contentId: "{{id}}",
      memberId: "{{@member.uuid}}",
      memberEmail: "{{@member.email}}"
    }
    </script>
  {{else}}
    <p>Become a {{@site.title}} member to view and leave comments (it's free!). As a member, you will also receive new posts by email (you can unsubscribe at any time).</p>
    <form data-members-form="signin" id="cove-login">
      <input class="cove-input" data-members-email type="email" required="true" placeholder="your@email.com" />
      <button type="submit" class="cove-button">Send a log in link</button>
      <span class="signin-success" style="display:none">Great! Please check your inbox (or spam folder) for a log in link.</span>
      <span class="signin-error" style="display:none">Something didn't work. Please try again.</span>
    </form>
    <p><a href="/subscribe/">Subscribe to a members plan.</a></p>
  {{/if}}
{{/if}}